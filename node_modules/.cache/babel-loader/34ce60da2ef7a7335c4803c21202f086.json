{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from 'react';\nimport DashBoardLayOut from '../../layouts/AdminDashboardLayout';\nimport httpHelper from \"../../helpers/httpHelper\";\n\nvar createFarm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(createFarm, _React$Component);\n\n  _createClass(createFarm, null, [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var req;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                req = _ref.req;\n                return _context.abrupt(\"return\", {\n                  farmId: req.params.farmId\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  function createFarm(props) {\n    var _this;\n\n    _classCallCheck(this, createFarm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(createFarm).call(this, props));\n    _this.state = {\n      farmDet: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(createFarm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getInvestors();\n    }\n  }, {\n    key: \"getInvestors\",\n    value: function getInvestors() {\n      var _this2 = this;\n\n      httpHelper.serverReq(\"http://localhost:3009/api/v1/farms/\" + this.props.farmId + \"/investments\").then(function (response) {\n        if (response.success) {\n          _this2.setState({\n            farmDet: response.success.data.farm,\n            investments: response.success.data.investments\n          });\n\n          _this2.state.investments.map(function (investment) {\n            return React.createElement(\"tr\", null, React.createElement(\"td\", null, investment.investor_name), React.createElement(\"td\", null, investment.invested_date), React.createElement(\"td\", null, _this2.calculatePaymentDate(investment.invested_date, _this2.calculateMonth(new Date(investment.funding_starts), new Date(investment.funding_ends)))), React.createElement(\"td\", null, investment.quantity), React.createElement(\"td\", null, _this2.calculateInvestedAmount(investment.roi, investment.price_per_unit)), React.createElement(\"td\", null, _this2.calculateInvestedAmount(investment.roi, investment.price_per_unit) + investment.quantity), React.createElement(\"td\", null, investment.investment_status), React.createElement(\"td\", null, investment.investment_status_id === status.ripe ? React.createElement(PayInvestor, {\n              investorId: investment.investor_id\n            }) : \"\"));\n          });\n        }\n      });\n    }\n  }, {\n    key: \"calculateMonth\",\n    value: function calculateMonth(d1, d2) {\n      var months;\n      months = (d2.getFullYear() - d1.getFullYear()) * 12;\n      months -= d1.getMonth();\n      months += d2.getMonth();\n      return months <= 0 ? 0 : months;\n    }\n  }, {\n    key: \"calculatePaymentDate\",\n    value: function calculatePaymentDate(investedDate, duration) {\n      var date = new Date();\n      date.setMonth(new Date(investedDate).getMonth() + duration);\n      return date.toISOString();\n    }\n  }, {\n    key: \"calculateInvestedAmount\",\n    value: function calculateInvestedAmount(roi, pricePerUnit) {\n      return roi * pricePerUnit / 100;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(DashBoardLayOut, null, React.createElement(\"hr\", null), React.createElement(\"br\", null), React.createElement(\"table\", {\n        className: \"table table-bordered datatable\",\n        id: \"table-3\"\n      }, React.createElement(\"thead\", null, React.createElement(\"tr\", {\n        className: \"replace-inputs\"\n      }, React.createElement(\"th\", null, \"Investor's Name\"), React.createElement(\"th\", null, \"Invested Date\"), React.createElement(\"th\", null, \"Due Date\"), React.createElement(\"th\", null, \"Total Units Bought\"), React.createElement(\"th\", null, \"Total Amount Paid\"), React.createElement(\"th\", null, \"Total Returnable Amount\"), React.createElement(\"th\", null, \"Status\"), React.createElement(\"th\", null, \"Action\"))), React.createElement(\"tbody\", null, this.state.allFarms), React.createElement(\"tfoot\", null, React.createElement(\"tr\", null, React.createElement(\"th\", null, \"Farm Name\"), React.createElement(\"th\", null, \"Duration\"), React.createElement(\"th\", null, \"Price\"), React.createElement(\"th\", null, \"Returns Percentage\"), React.createElement(\"th\", null, \"Units Available\"), React.createElement(\"th\", null, \"Units Bought\"), React.createElement(\"th\", null, \"Actions\")))), React.createElement(\"br\", null), React.createElement(\"br\", null));\n    }\n  }]);\n\n  return createFarm;\n}(React.Component);\n\nexport default createFarm;","map":{"version":3,"sources":["C:\\xampp\\htdocs\\easycow\\pages\\admin\\all-investments.js"],"names":["React","DashBoardLayOut","httpHelper","createFarm","req","farmId","params","props","state","farmDet","getInvestors","serverReq","then","response","success","setState","data","farm","investments","map","investment","investor_name","invested_date","calculatePaymentDate","calculateMonth","Date","funding_starts","funding_ends","quantity","calculateInvestedAmount","roi","price_per_unit","investment_status","investment_status_id","status","ripe","investor_id","d1","d2","months","getFullYear","getMonth","investedDate","duration","date","setMonth","toISOString","pricePerUnit","allFarms","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport DashBoardLayOut from '../../layouts/AdminDashboardLayout';\r\nimport httpHelper from \"../../helpers/httpHelper\";\r\n\r\nclass createFarm extends React.Component{\r\n\r\n  static async getInitialProps({ req }) {\r\n    return {farmId:req.params.farmId};\r\n  }\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {farmDet:\"\"}\r\n  }\r\n  componentDidMount() {\r\n    this.getInvestors();\r\n  }\r\n\r\n  getInvestors(){\r\n    httpHelper.serverReq(\"http://localhost:3009/api/v1/farms/\"+this.props.farmId+\"/investments\").then( (response)=> {\r\n      if (response.success){\r\n        this.setState({farmDet:response.success.data.farm,investments:response.success.data.investments});\r\n        this.state.investments.map((investment)=>{\r\n          return <tr>\r\n                    <td>{investment.investor_name}</td>\r\n                    <td>{investment.invested_date}</td>\r\n                    <td>{this.calculatePaymentDate(investment.invested_date,this.calculateMonth(new Date(investment.funding_starts),new Date(investment.funding_ends)))}</td>\r\n                    <td>{investment.quantity}</td>\r\n                     <td>{this.calculateInvestedAmount(investment.roi,investment.price_per_unit) }</td>\r\n                    <td>{this.calculateInvestedAmount(investment.roi,investment.price_per_unit) + investment.quantity}</td>\r\n                    <td>{investment.investment_status}</td>\r\n                    <td>{\r\n                          investment.investment_status_id === status.ripe?<PayInvestor investorId={investment.investor_id}/>:\"\"\r\n                        }\r\n                    </td>\r\n                </tr>\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  calculateMonth(d1,d2){\r\n    var months;\r\n    months = (d2.getFullYear() - d1.getFullYear()) * 12;\r\n    months -= d1.getMonth();\r\n    months += d2.getMonth();\r\n    return months <= 0 ? 0 : months;\r\n  }\r\n\r\n  calculatePaymentDate(investedDate,duration){\r\n\r\n    let date = new Date();\r\n    date.setMonth(new Date(investedDate).getMonth() + duration);\r\n    return  date.toISOString();\r\n\r\n  }\r\n\r\n  calculateInvestedAmount(roi,pricePerUnit){\r\n\r\n   return (roi * pricePerUnit)/100;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  render() {\r\n    return(\r\n      <DashBoardLayOut>\r\n\r\n        <hr/>\r\n\r\n\r\n        <br/>\r\n\r\n\r\n        <table className=\"table table-bordered datatable\" id=\"table-3\">\r\n          <thead>\r\n          <tr className=\"replace-inputs\">\r\n            <th>Investor's Name</th>\r\n            <th>Invested Date</th>\r\n            <th>Due Date</th>\r\n            <th>Total Units Bought</th>\r\n            <th>Total Amount Paid</th>\r\n            <th>Total Returnable Amount</th>\r\n            <th>Status</th>\r\n            <th>Action</th>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n\r\n          {this.state.allFarms}\r\n          </tbody>\r\n          <tfoot>\r\n          <tr>\r\n            <th>Farm Name</th>\r\n            <th>Duration</th>\r\n            <th>Price</th>\r\n            <th>Returns Percentage</th>\r\n            <th>Units Available</th>\r\n            <th>Units Bought</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n          </tfoot>\r\n        </table>\r\n\r\n\r\n        <br/>\r\n        <br/>\r\n      </DashBoardLayOut>\r\n    )\r\n  }\r\n}\r\n\r\nexport default createFarm;\r\n"]},"metadata":{},"sourceType":"module"}
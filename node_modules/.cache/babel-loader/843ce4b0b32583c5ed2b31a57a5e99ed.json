{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from 'react';\nimport DashBoardLayOut from '../../layouts/DashboardLayOut';\nimport httpHelper from '../../helpers/httpHelper';\nimport SingleFarm from '../../components/singleFarm';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport $ from 'jquery';\n\nvar allFarms =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(allFarms, _React$Component);\n\n  function allFarms(props) {\n    var _this;\n\n    _classCallCheck(this, allFarms);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(allFarms).call(this, props));\n    _this.state = {\n      nextPage: 1,\n      isLastpage: false,\n      hasMore: true,\n      farmsUI: [],\n      followedHasMore: true,\n      followedFarmsUI: []\n    };\n    _this.loadMoreFarms = _this.loadMoreFarms.bind(_assertThisInitialized(_this));\n    _this.handleFollowedTab = _this.handleFollowedTab.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(allFarms, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadMoreFarms();\n    }\n  }, {\n    key: \"handleFollowedTab\",\n    value: function handleFollowedTab(e) {\n      var _this2 = this;\n\n      httpHelper.serverReq(\"http://localhost:3009/api/v1/farms/user/followed?paginate=true\".concat(this.state.followedHasMore ? \"&page=\" + this.state.followedNextPage : \"\")).then(function (data) {\n        if (data.success) {\n          if (data.success.data.followedNextPage) {\n            _this2.setState({\n              followedNextPage: data.success.data.nextPage,\n              followedHasMore: true\n            });\n          } else {\n            _this2.setState({\n              followedNextPage: false,\n              followedHasMore: false\n            });\n          }\n\n          if (data.success.data.farms.length < 1) {\n            _this2.setState({\n              followedNextPage: false,\n              followedHasMore: false\n            });\n          }\n\n          var farmsUI = data.success.data.farms.map(function (farm) {\n            return React.createElement(SingleFarm, {\n              key: farm.farm_id,\n              details: farm\n            });\n          });\n          var updateUI = [];\n\n          _this2.setState({\n            followedFarmsUI: updateUI.concat(farmsUI)\n          });\n        }\n      });\n    }\n  }, {\n    key: \"loadMoreFarms\",\n    value: function loadMoreFarms() {\n      var _this3 = this;\n\n      httpHelper.serverReq(\"http://localhost:3009/api/v1/farms/all?paginate=true\".concat(this.state.hasMore ? \"&page=\" + this.state.nextPage : \"\")).then(function (data) {\n        if (data.success) {\n          if (data.success.data.nextPage) {\n            _this3.setState({\n              nextPage: data.success.data.nextPage,\n              hasMore: true\n            });\n          } else {\n            _this3.setState({\n              nextPage: false,\n              hasMore: false\n            });\n          }\n\n          if (data.success.data.farms.length < 1) {\n            _this3.setState({\n              nextPage: false,\n              hasMore: false\n            });\n          }\n\n          var farmsUI = data.success.data.farms.map(function (farm) {\n            return React.createElement(SingleFarm, {\n              key: farm.farm_id,\n              details: farm\n            });\n          });\n          var updateUI = _this3.state.farmsUI;\n\n          _this3.setState({\n            farmsUI: updateUI.concat(farmsUI)\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(DashBoardLayOut, null, React.createElement(\"div\", {\n        className: \"col-md-12\"\n      }, React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(\"ul\", {\n        className: \"nav nav-tabs bordered col-md-12 text-center\"\n      }, React.createElement(\"li\", {\n        className: \"active col-sm-6\"\n      }, React.createElement(\"a\", {\n        href: \"#open\",\n        \"data-toggle\": \"tab\"\n      }, React.createElement(\"span\", {\n        className: \"visible-xs\"\n      }, React.createElement(\"i\", {\n        className: \"entypo-home\"\n      })), React.createElement(\"span\", {\n        className: \"hidden-xs\"\n      }, React.createElement(\"h3\", null, \"All Farms\")))), React.createElement(\"li\", {\n        className: \"col-sm-6\",\n        onClick: this.handleFollowedTab\n      }, React.createElement(\"a\", {\n        href: \"#follow\",\n        \"data-toggle\": \"tab\"\n      }, React.createElement(\"span\", {\n        className: \"visible-xs\"\n      }, React.createElement(\"i\", {\n        className: \"entypo-user\"\n      })), React.createElement(\"span\", {\n        className: \"hidden-xs\"\n      }, React.createElement(\"h3\", null, \"Followed\")))))), React.createElement(\"div\", {\n        className: \"tab-content\"\n      }, React.createElement(\"div\", {\n        className: \"tab-pane active\",\n        id: \"open\"\n      }, React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(InfiniteScroll, {\n        dataLength: this.state.farmsUI.length,\n        next: this.loadMoreFarms,\n        hasMore: this.state.hasMore,\n        scrollThreshold: 0.8,\n        loader: React.createElement(\"h4\", null, \"Loading...\"),\n        endMessage: React.createElement(\"p\", {\n          style: {\n            textAlign: 'center'\n          }\n        }, React.createElement(\"b\", null, \"Yay! You have seen it all\"))\n      }, this.state.farmsUI))), React.createElement(\"div\", {\n        className: \"tab-pane\",\n        id: \"follow\"\n      }, React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(InfiniteScroll, {\n        dataLength: this.state.followedFarmsUI.length,\n        next: this.loadMoreFarms,\n        hasMore: this.state.followedHasMore,\n        scrollThreshold: 0.8,\n        loader: React.createElement(\"h4\", null, \"Loading...\"),\n        endMessage: React.createElement(\"p\", {\n          style: {\n            textAlign: 'center'\n          }\n        }, React.createElement(\"b\", null, \"Yay! You have seen it all\"))\n      }, this.state.followedFarmsUI))))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var req;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                req = _ref.req;\n                return _context.abrupt(\"return\", {});\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return allFarms;\n}(React.Component);\n\nexport default allFarms;","map":{"version":3,"sources":["C:\\xampp\\htdocs\\easycow\\pages\\user\\allFarms.js"],"names":["React","DashBoardLayOut","httpHelper","SingleFarm","InfiniteScroll","$","allFarms","props","state","nextPage","isLastpage","hasMore","farmsUI","followedHasMore","followedFarmsUI","loadMoreFarms","bind","handleFollowedTab","e","serverReq","followedNextPage","then","data","success","setState","farms","length","map","farm","farm_id","updateUI","concat","textAlign","req","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport DashBoardLayOut from '../../layouts/DashboardLayOut';\r\nimport httpHelper from '../../helpers/httpHelper';\r\nimport SingleFarm from '../../components/singleFarm';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport $ from 'jquery';\r\n\r\nclass allFarms extends React.Component{\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {nextPage:1,isLastpage:false,hasMore:true,farmsUI:[],followedHasMore:true,followedFarmsUI:[]};\r\n    this.loadMoreFarms = this.loadMoreFarms.bind(this);\r\n    this.handleFollowedTab = this.handleFollowedTab.bind(this);\r\n  }\r\n\r\n  static async getInitialProps({ req }) {\r\n\r\n    return {};\r\n  }\r\n  componentDidMount() {\r\n    this.loadMoreFarms();\r\n  }\r\n\r\n  handleFollowedTab(e){\r\n\r\n      httpHelper.serverReq(`http://localhost:3009/api/v1/farms/user/followed?paginate=true${this.state.followedHasMore?\"&page=\"+this.state.followedNextPage:\"\"}`).then( (data)=> {\r\n        if(data.success){\r\n          if (data.success.data.followedNextPage){\r\n\r\n            this.setState({followedNextPage:data.success.data.nextPage,followedHasMore:true});\r\n\r\n          }else{\r\n            this.setState({followedNextPage:false,followedHasMore:false});\r\n\r\n          }\r\n          if (data.success.data.farms.length < 1){\r\n            this.setState({followedNextPage:false,followedHasMore:false});\r\n          }\r\n\r\n          let farmsUI = data.success.data.farms.map(function (farm) {\r\n            return  <SingleFarm key={farm.farm_id} details={farm} />;\r\n          });\r\n\r\n          let updateUI = [];\r\n\r\n          this.setState({followedFarmsUI:updateUI.concat(farmsUI)});\r\n        }\r\n      })\r\n    }\r\n\r\n\r\n  loadMoreFarms(){\r\n\r\n    httpHelper.serverReq(`http://localhost:3009/api/v1/farms/all?paginate=true${this.state.hasMore?\"&page=\"+this.state.nextPage:\"\"}`).then( (data)=> {\r\n      if(data.success){\r\n        if (data.success.data.nextPage){\r\n          \r\n          this.setState({nextPage:data.success.data.nextPage,hasMore:true});\r\n\r\n        }else{\r\n          this.setState({nextPage:false,hasMore:false});\r\n\r\n        }\r\n        if (data.success.data.farms.length < 1){\r\n          this.setState({nextPage:false,hasMore:false});\r\n        }\r\n\r\n        let farmsUI = data.success.data.farms.map(function (farm) {\r\n         return  <SingleFarm key={farm.farm_id} details={farm} />;\r\n        });\r\n\r\n        let updateUI = this.state.farmsUI;\r\n\r\n        this.setState({farmsUI:updateUI.concat(farmsUI)});\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n    return(\r\n      <DashBoardLayOut>\r\n        <div className=\"col-md-12\">\r\n          <div className=\"row\">\r\n            <ul className=\"nav nav-tabs bordered col-md-12 text-center\">\r\n              <li className=\"active col-sm-6\">\r\n                <a href=\"#open\" data-toggle=\"tab\">\r\n                  <span className=\"visible-xs\"><i className=\"entypo-home\"></i></span>\r\n                  <span className=\"hidden-xs\"><h3>All Farms</h3></span>\r\n                </a>\r\n              </li>\r\n              <li className=\"col-sm-6\" onClick={this.handleFollowedTab}>\r\n                <a href=\"#follow\" data-toggle=\"tab\">\r\n                  <span className=\"visible-xs\"><i className=\"entypo-user\"></i></span>\r\n                  <span className=\"hidden-xs\"><h3>Followed</h3></span>\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"tab-content\">\r\n            <div className=\"tab-pane active\" id=\"open\">\r\n              <div className=\"row\">\r\n                <InfiniteScroll\r\n                  dataLength={this.state.farmsUI.length}\r\n                  next={this.loadMoreFarms}\r\n                  hasMore={this.state.hasMore}\r\n                  scrollThreshold={0.8}\r\n                  loader={<h4>Loading...</h4>}\r\n                  endMessage={\r\n                    <p style={{textAlign: 'center'}}>\r\n                      <b>Yay! You have seen it all</b>\r\n                    </p>\r\n                  }\r\n                >\r\n                  {this.state.farmsUI}\r\n                </InfiniteScroll>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            <div className=\"tab-pane\" id=\"follow\">\r\n              <div className=\"row\">\r\n                <InfiniteScroll\r\n                  dataLength={this.state.followedFarmsUI.length}\r\n                  next={this.loadMoreFarms}\r\n                  hasMore={this.state.followedHasMore}\r\n                  scrollThreshold={0.8}\r\n                  loader={<h4>Loading...</h4>}\r\n                  endMessage={\r\n                    <p style={{textAlign: 'center'}}>\r\n                      <b>Yay! You have seen it all</b>\r\n                    </p>\r\n                  }\r\n                >\r\n\r\n                  {this.state.followedFarmsUI}\r\n                </InfiniteScroll>\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </DashBoardLayOut>\r\n    )\r\n  }\r\n}\r\n\r\nexport default allFarms;\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from 'react';\nimport httpHelper from '../helpers/httpHelper';\nimport HelpBlock from '../components/HelpBlock';\nimport isAdmin from \"../middlewares/isAdmin\";\nimport TR from \"../components/activitiesTR\";\nimport Link from 'next/link';\n\nvar allFarmTableComponent =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(allFarmTableComponent, _React$Component);\n\n  function allFarmTableComponent(props) {\n    var _this;\n\n    _classCallCheck(this, allFarmTableComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(allFarmTableComponent).call(this, props));\n    _this.state = {\n      farmId: props.farmId,\n      allActivitiesObj: []\n    };\n    return _this;\n  }\n\n  _createClass(allFarmTableComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      isAdmin();\n    }\n  }, {\n    key: \"handleDelete\",\n    value: function handleDelete(id) {\n      var matchIndex;\n      this.state.activities.find(function (activity, index) {\n        if (activity.id === id) {\n          matchIndex = index;\n          return true;\n        }\n      });\n      delete this.state.activities[matchIndex];\n      this.setState({\n        activities: this.state.activities\n      });\n      this.updateRow();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getFarmActivitiesData();\n    }\n  }, {\n    key: \"initDataTable\",\n    value: function initDataTable() {\n      jQuery(document).ready(function ($) {\n        var $table3 = jQuery(\"#table-3\");\n        var table3 = $table3.DataTable({\n          \"aLengthMenu\": [[10, 25, 50, -1], [10, 25, 50, \"All\"]]\n        }); // Initalize Select Dropdown after DataTables is created\n\n        $table3.closest('.dataTables_wrapper').find('select').select2({\n          minimumResultsForSearch: -1\n        }); // Setup - add a text input to each footer cell\n\n        $('#table-3 tfoot th').each(function () {\n          var title = $('#table-3 thead th').eq($(this).index()).text();\n          $(this).html('<input type=\"text\" class=\"form-control\" placeholder=\"Search ' + title + '\" />');\n        }); // Apply the search\n\n        table3.columns().every(function () {\n          var that = this;\n          $('input', this.footer()).on('keyup change', function () {\n            if (that.search() !== this.value) {\n              that.search(this.value).draw();\n            }\n          });\n        });\n      });\n    }\n  }, {\n    key: \"getFarmActivitiesData\",\n    value: function getFarmActivitiesData() {\n      var _this2 = this;\n\n      httpHelper.serverReq('http://localhost:3009/api/v1/farms/activities/all?farm_id[eql]=' + this.state.farmId.toString()).then(function (response) {\n        if (response.success) {\n          var activities = response.success.data.activities;\n\n          _this2.setState({\n            activities: activities\n          });\n\n          _this2.updateRow();\n\n          _this2.initDataTable();\n        }\n      });\n    }\n  }, {\n    key: \"updateRow\",\n    value: function updateRow() {\n      var _this3 = this;\n\n      var allActivitiesObj = this.state.activities.map(function (activity) {\n        return React.createElement(TR, {\n          onDelete: _this3.handleDelete,\n          data: activity\n        });\n      });\n      this.setState({\n        allActivitiesObj: allActivitiesObj\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"table\", {\n        className: \"table table-bordered datatable\",\n        id: \"table-3\"\n      }, React.createElement(\"thead\", null, React.createElement(\"tr\", {\n        className: \"replace-inputs\"\n      }, React.createElement(\"th\", null, \"Date\"), React.createElement(\"th\", null, \"Activity\"), React.createElement(\"th\", null, \"Summary\"), React.createElement(\"th\", null, \"Information\"), React.createElement(\"th\", null, \"Week\"), React.createElement(\"th\", null, \"Stage\"), React.createElement(\"th\", null, \"Actions\"))), React.createElement(\"tbody\", null, this.state.allActivitiesObj.map(function (row) {\n        return row;\n      })), React.createElement(\"tfoot\", null, React.createElement(\"tr\", null, React.createElement(\"th\", null, \"Date\"), React.createElement(\"th\", null, \"Activity\"), React.createElement(\"th\", null, \"Summary\"), React.createElement(\"th\", null, \"Information\"), React.createElement(\"th\", null, \"Week\"), React.createElement(\"th\", null, \"Stage\"), React.createElement(\"th\", null, \"Units Bought\"), React.createElement(\"th\", null, \"Actions\"))));\n    }\n  }]);\n\n  return allFarmTableComponent;\n}(React.Component);\n\nexport default allFarmTableComponent;","map":{"version":3,"sources":["C:\\xampp\\htdocs\\easycow\\components\\allFarmActivities.js"],"names":["React","httpHelper","HelpBlock","isAdmin","TR","Link","allFarmTableComponent","props","state","farmId","allActivitiesObj","id","matchIndex","activities","find","activity","index","setState","updateRow","getFarmActivitiesData","jQuery","document","ready","$","$table3","table3","DataTable","closest","select2","minimumResultsForSearch","each","title","eq","text","html","columns","every","that","footer","on","search","value","draw","serverReq","toString","then","response","success","data","initDataTable","map","handleDelete","row","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport httpHelper from '../helpers/httpHelper';\r\nimport HelpBlock from '../components/HelpBlock';\r\nimport isAdmin from \"../middlewares/isAdmin\";\r\nimport TR  from \"../components/activitiesTR\";\r\nimport Link from 'next/link';\r\n\r\n\r\nclass allFarmTableComponent extends React.Component{\r\n\r\n  constructor(props){\r\n    super(props);\r\n      this.state ={farmId:props.farmId,allActivitiesObj:[]\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    isAdmin();\r\n\r\n  }\r\n  handleDelete(id){\r\n    let matchIndex;\r\n      this.state.activities.find((activity,index) =>{\r\n     if (activity.id === id){\r\n       matchIndex = index;\r\n       return true;\r\n     }\r\n\r\n   });\r\n      delete this.state.activities[matchIndex];\r\n      this.setState({activities:this.state.activities});\r\n      this.updateRow();\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    this.getFarmActivitiesData();\r\n  }\r\n\r\n  initDataTable(){\r\n    jQuery(document).ready(function($) {\r\n      var $table3 = jQuery(\"#table-3\");\r\n\r\n      var table3 = $table3.DataTable({\r\n        \"aLengthMenu\": [\r\n          [10, 25, 50, -1],\r\n          [10, 25, 50, \"All\"]\r\n        ]\r\n      });\r\n\r\n      // Initalize Select Dropdown after DataTables is created\r\n      $table3.closest('.dataTables_wrapper').find('select').select2({\r\n        minimumResultsForSearch: -1\r\n      });\r\n\r\n      // Setup - add a text input to each footer cell\r\n      $('#table-3 tfoot th').each(function() {\r\n        var title = $('#table-3 thead th').eq($(this).index()).text();\r\n        $(this).html('<input type=\"text\" class=\"form-control\" placeholder=\"Search ' + title + '\" />');\r\n      });\r\n\r\n      // Apply the search\r\n      table3.columns().every(function() {\r\n        var that = this;\r\n\r\n        $('input', this.footer()).on('keyup change', function() {\r\n          if (that.search() !== this.value) {\r\n            that\r\n              .search(this.value)\r\n              .draw();\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  getFarmActivitiesData(){\r\n    httpHelper.serverReq('http://localhost:3009/api/v1/farms/activities/all?farm_id[eql]='+this.state.farmId.toString()).then( (response)=> {\r\n      if (response.success){\r\n        let activities = response.success.data.activities;\r\n        this.setState({activities:activities});\r\n        this.updateRow();\r\n        this.initDataTable();\r\n\r\n      }\r\n    })\r\n  }\r\n\r\n  updateRow(){\r\n    let allActivitiesObj =  this.state.activities.map(activity=>\r\n      <TR onDelete={this.handleDelete} data={activity} />\r\n    );\r\n    this.setState({allActivitiesObj:allActivitiesObj});\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <table className=\"table table-bordered datatable\" id=\"table-3\">\r\n        <thead>\r\n        <tr className=\"replace-inputs\">\r\n          <th>Date</th>\r\n          <th>Activity</th>\r\n          <th>Summary</th>\r\n          <th>Information</th>\r\n          <th>Week</th>\r\n          <th>Stage</th>\r\n          <th>Actions</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n\r\n        {this.state.allActivitiesObj.map(function (row) {\r\n          return row;\r\n        })}\r\n        </tbody>\r\n        <tfoot>\r\n        <tr>\r\n          <th>Date</th>\r\n          <th>Activity</th>\r\n          <th>Summary</th>\r\n          <th>Information</th>\r\n          <th>Week</th>\r\n          <th>Stage</th>\r\n          <th>Units Bought</th>\r\n          <th>Actions</th>\r\n        </tr>\r\n        </tfoot>\r\n      </table>\r\n    )\r\n  }\r\n}\r\n\r\nexport default allFarmTableComponent;\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from 'react';\nimport DashBoardLayOut from '../../layouts/DashboardLayOut';\nimport payStackConf from \"../../config/paystack\";\nimport httpHelper from '../../helpers/httpHelper';\nimport SingleFarm from '../../components/singleFarm';\nimport { useRouter } from 'next/router';\nimport $ from 'jquery';\nimport Router from \"next/router\";\n\nvar allFarms =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(allFarms, _React$Component);\n\n  function allFarms(props) {\n    _classCallCheck(this, allFarms);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(allFarms).call(this, props));\n  }\n\n  _createClass(allFarms, [{\n    key: \"initDataTable\",\n    value: function initDataTable() {\n      jQuery(document).ready(function ($) {\n        var $table3 = jQuery(\"#table-3\");\n        var table3 = $table3.DataTable({\n          \"aLengthMenu\": [[10, 25, 50, -1], [10, 25, 50, \"All\"]]\n        }); // Initalize Select Dropdown after DataTables is created\n\n        $table3.closest('.dataTables_wrapper').find('select').select2({\n          minimumResultsForSearch: -1\n        }); // Setup - add a text input to each footer cell\n\n        $('#table-3 tfoot th').each(function () {\n          var title = $('#table-3 thead th').eq($(this).index()).text();\n          $(this).html('<input type=\"text\" class=\"form-control\" placeholder=\"Search ' + title + '\" />');\n        }); // Apply the search\n\n        table3.columns().every(function () {\n          var that = this;\n          $('input', this.footer()).on('keyup change', function () {\n            if (that.search() !== this.value) {\n              that.search(this.value).draw();\n            }\n          });\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getTableData();\n      this.initDataTable();\n    }\n  }, {\n    key: \"getTableData\",\n    value: function getTableData() {\n      var _this = this;\n\n      httpHelper.serverReq(\"http://localhost:3009/api/v1/user/investments\").then(function (response) {\n        if (response.success) {\n          var rows = response.success.map(function (investment) {\n            var interest = investment.invested_amount * investment.roi / 100;\n            return React.createElement(\"tr\", {\n              className: \"odd gradeX\"\n            }, React.createElement(\"td\", null, investment.title), React.createElement(\"td\", null, \"\\u20A6\", investment.invested_amount), React.createElement(\"td\", null, \"\\u20A6\", investment.roi, \"%\"), React.createElement(\"td\", null, _this.calculateMonth(new Date(farm.farm_starts), new Date(farm.farm_ends)), \" Months\"), React.createElement(\"td\", null, \"\\u20A6\", new Date(investment.farm_ends).toDateString()), React.createElement(\"td\", null, \"\\u20A6\", interest), React.createElement(\"td\", null, \"\\u20A6\", interest + investment.invested_amount));\n          });\n\n          _this.setState({\n            investments: rows\n          });\n        }\n      });\n    }\n  }, {\n    key: \"calculateMonth\",\n    value: function calculateMonth(d1, d2) {\n      var months;\n      months = (d2.getFullYear() - d1.getFullYear()) * 12;\n      months -= d1.getMonth();\n      months += d2.getMonth();\n      return months <= 0 ? 0 : months;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(DashBoardLayOut, null, React.createElement(\"h2\", {\n        className: \"text-center\",\n        id: \"form-head\"\n      }, \"Transactions\"), React.createElement(\"br\", null), React.createElement(\"table\", {\n        className: \"table table-bordered datatable\",\n        id: \"table-3\"\n      }, React.createElement(\"thead\", null, React.createElement(\"tr\", {\n        className: \"replace-inputs\"\n      }, React.createElement(\"th\", null, \"Farm Name\"), React.createElement(\"th\", null, \"Units Price\"), React.createElement(\"th\", null, \"Units Funded\"), React.createElement(\"th\", null, \"Return Percentage\"))), React.createElement(\"tbody\", null, React.createElement(\"tr\", {\n        className: \"odd gradeX\"\n      }, React.createElement(\"td\", null, \"N'dama Cow Farm\"), React.createElement(\"td\", null, \"\\u20A660,000\"), React.createElement(\"td\", null, \"100 Units\"), React.createElement(\"td\", null, \"30%\"))), React.createElement(\"tfoot\", null, React.createElement(\"tr\", null, React.createElement(\"th\", null, \"Farm Name\"), React.createElement(\"th\", null, \"Followed\"), React.createElement(\"th\", null, \"Units Funded\"), React.createElement(\"th\", null, \"Return Percentage\")))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var req;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                req = _ref.req;\n                return _context.abrupt(\"return\", {\n                  reference: req.query.reference\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return allFarms;\n}(React.Component);\n\nexport default allFarms;","map":{"version":3,"sources":["C:\\xampp\\htdocs\\easycow\\pages\\user\\investments.js"],"names":["React","DashBoardLayOut","payStackConf","httpHelper","SingleFarm","useRouter","$","Router","allFarms","props","jQuery","document","ready","$table3","table3","DataTable","closest","find","select2","minimumResultsForSearch","each","title","eq","index","text","html","columns","every","that","footer","on","search","value","draw","getTableData","initDataTable","serverReq","then","response","success","rows","map","investment","interest","invested_amount","roi","calculateMonth","Date","farm","farm_starts","farm_ends","toDateString","setState","investments","d1","d2","months","getFullYear","getMonth","req","reference","query","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport DashBoardLayOut from '../../layouts/DashboardLayOut';\r\nimport payStackConf from \"../../config/paystack\"\r\nimport httpHelper from '../../helpers/httpHelper';\r\nimport SingleFarm from '../../components/singleFarm';\r\nimport { useRouter } from 'next/router';\r\nimport $ from 'jquery';\r\nimport Router from \"next/router\";\r\n\r\n\r\nclass allFarms extends React.Component{\r\n\r\n  constructor(props){\r\n    super(props);\r\n\r\n  }\r\n\r\n  static async getInitialProps({ req }) {\r\n    return {reference:req.query.reference};\r\n  }\r\n  initDataTable(){\r\n    jQuery(document).ready(function($) {\r\n      var $table3 = jQuery(\"#table-3\");\r\n\r\n      var table3 = $table3.DataTable({\r\n        \"aLengthMenu\": [\r\n          [10, 25, 50, -1],\r\n          [10, 25, 50, \"All\"]\r\n        ]\r\n      });\r\n\r\n      // Initalize Select Dropdown after DataTables is created\r\n      $table3.closest('.dataTables_wrapper').find('select').select2({\r\n        minimumResultsForSearch: -1\r\n      });\r\n\r\n      // Setup - add a text input to each footer cell\r\n      $('#table-3 tfoot th').each(function() {\r\n        var title = $('#table-3 thead th').eq($(this).index()).text();\r\n        $(this).html('<input type=\"text\" class=\"form-control\" placeholder=\"Search ' + title + '\" />');\r\n      });\r\n\r\n      // Apply the search\r\n      table3.columns().every(function() {\r\n        var that = this;\r\n\r\n        $('input', this.footer()).on('keyup change', function() {\r\n          if (that.search() !== this.value) {\r\n            that\r\n              .search(this.value)\r\n              .draw();\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getTableData();\r\n    this.initDataTable();\r\n\r\n  }\r\n\r\n  getTableData(){\r\n    httpHelper.serverReq(\"http://localhost:3009/api/v1/user/investments\").then((response)=>{\r\n      if (response.success){\r\n       let rows =  response.success.map((investment)=>{\r\n         let interest = (investment.invested_amount * investment.roi)/100\r\n          return <tr className=\"odd gradeX\">\r\n                  <td>{investment.title}</td>\r\n                  <td>&#8358;{investment.invested_amount}</td>\r\n                  <td>&#8358;{investment.roi}%</td>\r\n                  <td>{this.calculateMonth( new Date(farm.farm_starts),new Date(farm.farm_ends))} Months</td>\r\n                  <td>&#8358;{new Date(investment.farm_ends).toDateString()}</td>\r\n                  <td>&#8358;{interest}</td>\r\n                  <td>&#8358;{interest+investment.invested_amount}</td>\r\n                </tr>\r\n        })\r\n        this.setState({investments:rows});\r\n      }\r\n    })\r\n  }\r\n\r\n  calculateMonth(d1,d2){\r\n    var months;\r\n    months = (d2.getFullYear() - d1.getFullYear()) * 12;\r\n    months -= d1.getMonth();\r\n    months += d2.getMonth();\r\n    return months <= 0 ? 0 : months;\r\n  }\r\n\r\n\r\n  render() {\r\n    return(\r\n      <DashBoardLayOut>\r\n        <h2 className=\"text-center\" id=\"form-head\">Transactions</h2>\r\n        <br/>\r\n        <table className=\"table table-bordered datatable\" id=\"table-3\">\r\n          <thead>\r\n          <tr className=\"replace-inputs\">\r\n            <th>Farm Name</th>\r\n            <th>Units Price</th>\r\n            <th>Units Funded</th>\r\n            <th>Return Percentage</th>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr className=\"odd gradeX\">\r\n              <td>N'dama Cow Farm</td>\r\n              <td>â‚¦60,000</td>\r\n              <td>100 Units</td>\r\n              <td>30%</td>\r\n            </tr>\r\n          </tbody>\r\n          <tfoot>\r\n          <tr>\r\n            <th>Farm Name</th>\r\n            <th>Followed</th>\r\n            <th>Units Funded</th>\r\n            <th>Return Percentage</th>\r\n          </tr>\r\n          </tfoot>\r\n        </table>\r\n      </DashBoardLayOut>\r\n    )\r\n  }\r\n}\r\n\r\nexport default allFarms;\r\n"]},"metadata":{},"sourceType":"module"}